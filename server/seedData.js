import dotenv from 'dotenv';
import mongoose from 'mongoose';
import User from './models/User.js';
import Category from './models/Category.js';
import Product from './models/Product.js';
import connectDB from './config/db.js';

dotenv.config();

const seedUsers = [
  {
    email: 'admin@shop.com',
    password: 'admin123',
    fullName: '–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä',
    phone: '+380501234567',
    address: '–ö–∏—ó–≤, –≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 1',
    role: 'admin'
  },
  {
    email: 'customer@shop.com',
    password: 'customer123',
    fullName: '–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ',
    phone: '+380507654321',
    address: '–õ—å–≤—ñ–≤, –≤—É–ª. –°–≤–æ–±–æ–¥–∏, 10',
    role: 'customer'
  }
];

const seedCategories = [
  { name: '–§–µ–Ω—Ç–µ–∑—ñ', description: '–ú–∞–≥—ñ—á–Ω—ñ —Å–≤—ñ—Ç–∏ —Ç–∞ –ø—Ä–∏–≥–æ–¥–∏' },
  { name: '–†–æ–º–∞–Ω', description: '–Ü—Å—Ç–æ—Ä—ñ—ó –ø—Ä–æ –∫–æ—Ö–∞–Ω–Ω—è —Ç–∞ –∂–∏—Ç—Ç—è' },
  { name: '–î–µ—Ç–µ–∫—Ç–∏–≤', description: '–ó–ª–æ—á–∏–Ω–∏ —Ç–∞ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è' },
  { name: '–°–∞–º–æ—Ä–æ–∑–≤–∏—Ç–æ–∫', description: '–ü—Å–∏—Ö–æ–ª–æ–≥—ñ—è —Ç–∞ –º–æ—Ç–∏–≤–∞—Ü—ñ—è' }
];

const seedData = async () => {
  try {
    await connectDB();

    console.log('üóëÔ∏è  –û—á–∏—â–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...');
    await User.deleteMany();
    await Category.deleteMany();
    await Product.deleteMany();

    console.log('–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤...');
    const users = await User.create(seedUsers);
    console.log(`–°—Ç–≤–æ—Ä–µ–Ω–æ ${users.length} –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤`);

    console.log('–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π...');
    const categories = await Category.create(seedCategories);
    console.log(`–°—Ç–≤–æ—Ä–µ–Ω–æ ${categories.length} –∫–∞—Ç–µ–≥–æ—Ä—ñ–π`);

    // –ü—Ä–æ–¥—É–∫—Ç–∏ –ø–æ 5 –Ω–∞ –∫–æ–∂–Ω—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é
    const seedProducts = [
      // –§–µ–Ω—Ç–µ–∑—ñ
      {
        name: '–ì–∞—Ä—Ä—ñ –ü–æ—Ç—Ç–µ—Ä —ñ —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–∏–π –∫–∞–º—ñ–Ω—å. –Ü–ª—é—Å—Ç—Ä–æ–≤–∞–Ω–µ –≤–∏–¥–∞–Ω–Ω—è',
        author: '–î–∂. –ö. –†–æ–ª—ñ–Ω“ë',
        description: '–ü–µ—Ä—à–∞ –∫–Ω–∏–≥–∞ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ—ó —Å–µ—Ä—ñ—ó –ø—Ä–æ —Ö–ª–æ–ø—á–∏–∫–∞, —è–∫–∏–π –¥—ñ–∑–Ω–∞—î—Ç—å—Å—è, —â–æ –≤—ñ–Ω —á–∞—Ä—ñ–≤–Ω–∏–∫.',
        price: 499,
        discount: 10,
        stock: 20,
        image: 'https://bookinstein.ua/files/resized/products/630345_1-1.600x800.jpg.webp',
        category: categories[0]._id
      },
     {
        name: '–ì–∞—Ä—Ä—ñ –ü–æ—Ç—Ç–µ—Ä i –û—Ä–¥–µ–Ω –§–µ–Ω—ñ–∫—Å–∞',
        author: '–î–∂. –ö. –†–æ–ª—ñ–Ω“ë',
        description: '–ù—ñ—Ö—Ç–æ –π –Ω–µ —Å–ø–æ–¥—ñ–≤–∞–≤—Å—è, —â–æ –ø‚Äô—è—Ç–∏–π —Ä—ñ–∫ –Ω–∞–≤—á–∞–Ω–Ω—è —É “ê–æ–≥–≤–æ—Ä—Ç—Å—ñ –±—É–¥–µ –¥–ª—è –ì–∞—Ä—Ä—ñ —Ç–∞ –π–æ–≥–æ –¥—Ä—É–∑—ñ–≤ –ª–µ–≥–∫–æ—é –ø—Ä–æ–≥—É–ª—è–Ω–∫–æ—é. –ü—Ä–æ—Ç–µ –∑–∞–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –≤ —à–∫–æ–ª—ñ –ø–æ—Å–∞–¥–∏ –í–µ—Ä—Ö–æ–≤–Ω–æ–≥–æ —ñ–Ω–∫–≤—ñ–∑–∏—Ç–æ—Ä–∞ —â–µ –±—ñ–ª—å—à–µ –≤—Å–µ —É—Å–∫–ª–∞–¥–Ω–∏–ª–æ...',
        price: 450,
        discount: 10,
        stock: 21,
        image: 'https://bookinstein.ua/files/resized/products/130_1_2-1-1-1.600x800.jpg.webp',
        category: categories[0]._id
      },
      {
        name: '–ö–ª—ñ—Ç–∫–∞ –∫–æ—Ä–æ–ª—è',
        author: '–í—ñ–∫—Ç–æ—Ä—ñ—è –ê–≤–µ—è—Ä–¥',
        description: '–ú–∞—Ä–∞ –ë–∞—Ä—Ä–æ–≤ –∂–∏–≤–µ —É —Å–≤—ñ—Ç—ñ, –¥–µ –≤—Å—ñ –∑–Ω–∞—é—Ç—å: –ª—é–¥–∏ –∑—ñ —Å—Ä—ñ–±–Ω–æ—é –∫—Ä–æ–≤‚Äô—é –Ω–∞—Ä–æ–¥–∂–µ–Ω—ñ –ø–∞–Ω—É–≤–∞—Ç–∏. –õ—é–¥–∏ –∑ –±–∞–≥—Ä—è–Ω–æ—é –∫—Ä–æ–≤‚Äô—é –ø—Ä–∏—Ä–µ—á–µ–Ω—ñ –±—É—Ç–∏ —Ä–∞–±–∞–º–∏. –ú–∞—Ä–∞ ‚Äì –¥—ñ–≤—á–∏–Ω–∞ –∑ –±–∞–≥—Ä—è–Ω–æ—é –∫—Ä–æ–≤‚Äô—é —Å–∞–º–∏–º —Ñ–∞–∫—Ç–æ–º —Å–≤–æ–≥–æ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Å—Ç–∞–≤–∏—Ç—å –ø—ñ–¥ —Å—É–º–Ω—ñ–≤ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–µ–¥–∫–æ–≤—ñ—á–Ω–æ–≥–æ –ª–∞–¥—É –π –æ–¥—Ä–∞–∑—É —Å—Ç–∞—î —Å–∏–º–≤–æ–ª–æ–º –±–æ—Ä–æ—Ç—å–±–∏ –∑–∞ –ø—Ä–∞–≤–∞ –ø—Ä–∏–≥–Ω–æ–±–ª–µ–Ω–∏—Ö –±–∞–≥—Ä—è–Ω–∏—Ö.',
        price: 200,
        stock: 15,
        image: 'https://bookinstein.ua/files/resized/products/id709159.600x800.png.webp',
        category: categories[0]._id
      },
      {
        name: '–í–æ–ª–æ–¥–∞—Ä –ø–µ—Ä—Å–Ω—ñ–≤. –ë—Ä–∞—Ç—Å—Ç–≤–æ –ø–µ—Ä—Å–Ω—è',
        author: '–î–∂. –†. –†. –¢–æ–ª–∫—ñ–Ω',
        description: '–ï–ø—ñ—á–Ω–∞ –ø–æ–¥–æ—Ä–æ–∂ –°–µ—Ä–µ–¥–∑–µ–º‚Äô—è–º –∑–∞–¥–ª—è –∑–Ω–∏—â–µ–Ω–Ω—è –ü–µ—Ä—Å–Ω—è –í—Å–µ–≤–ª–∞–¥–¥—è.',
        price: 499,
        stock: 15,
        image: 'https://static.yakaboo.ua/media/cloudflare/product/webp/600x840/i/m/img_70506_1.jpg',
        category: categories[0]._id
      },

      // –†–æ–º–∞–Ω
      {
        name: '–ì–æ—Ä–¥—ñ—Å—Ç—å —ñ —É–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è',
        author: '–î–∂–µ–π–Ω –û—Å—Ç—ñ–Ω',
        description: '–ö–ª–∞—Å–∏—á–Ω–∏–π —Ä–æ–º–∞–Ω –ø—Ä–æ –∫–æ—Ö–∞–Ω–Ω—è, –≥–æ—Ä–¥—ñ—Å—Ç—å —ñ —Å–æ—Ü—ñ–∞–ª—å–Ω—ñ —É–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è.',
        price: 299,
        stock: 12,
        image: 'https://static.yakaboo.ua/media/cloudflare/product/webp/600x840/f/i/file_213_8.png',
        category: categories[1]._id
      },
      {
        name: '–û–≥–∏–¥–Ω–µ –∫–æ—Ö–∞–Ω–Ω—è',
        author: '–ö–æ–ª–ª—ñ–Ω –ì—É–≤–µ—Ä',
        description: '–ö–Ω–∏–≥–∞ —Ä–æ–∑–ø–æ–≤—ñ–¥–∞—î –ø—Ä–æ –ø–æ–¥–æ—Ä–æ–∂ –¥–æ –∑—Ü—ñ–ª–µ–Ω–Ω—è —Ç–∞ –¥—Ä—É–≥–∏–π —à–∞–Ω—Å, –π —Ç–µ, —â–æ —ñ–Ω–æ–¥—ñ —Å–∞–º–µ –Ω–∞–º –Ω–∞–ª–µ–∂–∏—Ç—å –∑—Ä–æ–±–∏—Ç–∏ –ø–µ—Ä—à–∏–π –∫—Ä–æ–∫ –¥–æ —Ü—å–æ–≥–æ.',
        price: 299,
        stock: 10,
        image: 'https://static.yakaboo.ua/media/cloudflare/product/webp/600x840/i/m/img167_1_23.jpg',
        category: categories[1]._id
      },

      // –î–µ—Ç–µ–∫—Ç–∏–≤
      {
        name: '–í–±–∏–≤—Å—Ç–≤–æ —É –°—Ö—ñ–¥–Ω–æ–º—É –µ–∫—Å–ø—Ä–µ—Å—ñ',
        author: '–ê“ë–∞—Ç–∞ –ö—Ä—ñ—Å—Ç—ñ',
        description: '–ó–Ω–∞–º–µ–Ω–∏—Ç–µ —Ä–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è –ï—Ä–∫—é–ª—è –ü—É–∞—Ä–æ —É —Ä–æ–∑–∫—ñ—à–Ω–æ–º—É –ø–æ—ó–∑–¥—ñ.',
        price: 349,
        discount: 5,
        stock: 10,
        image: 'https://bookinstein.ua/files/resized/products/58488_116217.600x800.jpg.webp',
        category: categories[2]._id
      },
      {
        name: '–Ü –Ω–µ –ª–∏—à–∏–ª–æ—Å—å –∂–æ–¥–Ω–æ–≥–æ',
        author: '–ê“ë–∞—Ç–∞ –ö—Ä—ñ—Å—Ç—ñ',
        description: ' –î–µ—Å—è—Ç–µ—Ä–æ –Ω–µ–∑–Ω–∞–π–æ–º—Ü—ñ–≤ –æ–ø–∏–Ω–∏–ª–∏—Å—è –Ω–∞ –¥–∞–ª–µ–∫–æ–º—É –°–æ–ª–¥–∞—Ç—Å—å–∫–æ–º—É –æ—Å—Ç—Ä–æ–≤—ñ: —É—Å—ñ –æ—Ç—Ä–∏–º–∞–ª–∏ –¥–∏–≤–Ω–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –ø—Ä–∏—ó—Ö–∞—Ç–∏ —Å—é–¥–∏, –¥–æ —Ä–æ–∑–∫—ñ—à–Ω–æ–≥–æ –±—É–¥–∏–Ω–∫—É. –û–¥–Ω–∞–∫ –ø–æ–∫–∏ –≤–æ–Ω–∏ –Ω–µ —Ä–æ–∑—É–º—ñ—é—Ç—å, —Ö—Ç–æ —ñ –¥–ª—è —á–æ–≥–æ —ó—Ö –≤–∏–∫–ª–∏–∫–∞–≤‚Ä¶ –ó–≥–æ–¥–æ–º –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∂–∞—Ö—ñ—Ç—Ç—è: —Ö—Ç–æ—Å—å –∂–æ—Ä—Å—Ç–æ–∫–æ –π –≤–∏–≥–∞–¥–ª–∏–≤–æ –≤–±–∏–≤–∞—î –≥–æ—Å—Ç–µ–π, –∞ –∑—ñ —Å—Ç–æ–ª—É, –Ω–∞ —è–∫–æ–º—É —Å—Ç–æ—è–ª–æ —Ä—ñ–≤–Ω–æ –¥–µ—Å—è—Ç—å –ø–æ—Ä—Ü–µ–ª—è–Ω–æ–≤–∏—Ö —Å—Ç–∞—Ç—É–µ—Ç–æ–∫, –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º —É–±–∏–≤—Å—Ç–≤–æ–º –∑–Ω–∏–∫–∞—î –æ–¥–Ω–∞‚Ä¶ –Ø–∫ —Ü—è –º–æ—Ç–æ—Ä–æ—à–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–≤‚Äô—è–∑–∞–Ω–∞ —ñ–∑ –¥–∏—Ç—è—á–æ—é –ª—ñ—á–∏–ª–∫–æ—é? –Ü, –≥–æ–ª–æ–≤–Ω–µ, —Ö—Ç–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π?',
        price: 200,
        discount: 5,
        stock: 14,
        image: 'https://bookinstein.ua/files/resized/products/id90380.600x800.png.webp',
        category: categories[2]._id
      },

      // –°–∞–º–æ—Ä–æ–∑–≤–∏—Ç–æ–∫
      {
        name: '–ê—Ç–æ–º–Ω—ñ –∑–≤–∏—á–∫–∏',
        author: '–î–∂–µ–π–º—Å –ö–ª—ñ—Ä',
        description: '–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –≥—ñ–¥ –ø—Ä–æ —Ç–µ, —è–∫ –º–∞–ª–µ–Ω—å–∫—ñ –∑–≤–∏—á–∫–∏ –∑–º—ñ–Ω—é—é—Ç—å –∂–∏—Ç—Ç—è.',
        price: 379,
        stock: 18,
        image: 'https://bookinstein.ua/files/resized/products/757079_1_original.600x800.jpeg.webp',
        category: categories[3]._id
      },
      {
        name: '–ó–∞—Å–Ω–æ–≤–Ω–∏–∫–∏. –Ü—Å—Ç–æ—Ä—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è PayPal —Ç–∞ –ö—Ä–µ–º–Ω—ñ—î–≤–æ—ó –¥–æ–ª–∏–Ω–∏',
        author: '–î–∂–∏–º–º—ñ –°–æ–Ω—ñ',
        description: '–Ü–ª–æ–Ω –ú–∞—Å–∫, –ï–º—ñ –†–æ—É –ö–ª–µ–º–µ–Ω—Ç, –ü—ñ—Ç–µ—Ä –¢—ñ–ª—å, –î–∂—É–ª—ñ –ê–Ω–¥–µ—Ä—Å–æ–Ω, –ú–∞–∫—Å –õ–µ–≤—á–∏–Ω ‚Äî —ñ–º–µ–Ω–∞, —è–∫—ñ –±–µ–Ω—Ç–µ–∂–∞—Ç—å –Ω–∞—à—É —É—è–≤—É. –ö–æ–ª–∏—Å—å —Ü—ñ –ª—é–¥–∏ –±—É–ª–∏ –Ω–µ–≤—ñ–¥–æ–º–∏–º–∏ —Ç–≤–æ—Ä—Ü—è–º–∏ –ø–µ—Ä–µ—Å—ñ—á–Ω–æ—ó –∫–æ–º–ø–∞–Ω—ñ—ó, —è–∫–∞ –ø—Ä–æ–≤–æ–¥–∏–ª–∞ –æ–Ω–ª–∞–π–Ω-–ø–ª–∞—Ç–µ–∂—ñ, –∞ —Å—å–æ–≥–æ–¥–Ω—ñ —ó—Ö –≤–≤–∞–∂–∞—é—Ç—å –æ–¥–Ω–∏–º–∏ –∑ –Ω–∞–π–≤–ø–ª–∏–≤–æ–≤—ñ—à–∏—Ö —É —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω—ñ–π –≥–∞–ª—É–∑—ñ. –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è PayPal –≤–æ–Ω–∏ —Ñ—ñ–Ω–∞–Ω—Å—É–≤–∞–ª–∏ —Ç–∞ –∫–æ–Ω—Å—É–ª—å—Ç—É–≤–∞–ª–∏ –ø—Ä–æ–≤—ñ–¥–Ω—ñ –∫–æ–º–ø–∞–Ω—ñ—ó —Å–≤—ñ—Ç—É: Tesla, Facebook, YouTube, SpaceX, Yelp, Palantir, LinkedIn —Ç–æ—â–æ.',
        price: 399,
        stock: 18,
        image: 'https://bookinstein.ua/files/resized/products/3507da04_bez-imeni-1.600x800.jpg.webp',
        category: categories[3]._id
      }
    ];

    console.log('–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤...');
    const products = await Product.create(seedProducts);
    console.log(`–°—Ç–≤–æ—Ä–µ–Ω–æ ${products.length} —Ç–æ–≤–∞—Ä—ñ–≤`);

    console.log(`
      SEED –£–°–ü–Ü–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û!                           
      –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:                                      
      admin@shop.com / admin123 (admin)                
      customer@shop.com / customer123 (customer)       
                                                       
      –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó: ${categories.length}                                     
      –¢–æ–≤–∞—Ä–∏: ${products.length}                                        
    `);

    process.exit(0);
  } catch (error) {
    console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ seed:', error);
    process.exit(1);
  }
};

seedData();
